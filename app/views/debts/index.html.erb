<!-- Checks if a user is logged in -->
<% if current_user %>
<h3>Gesamtschuldenliste:</h3>

<!--Löschen der bishierigen Daten und ausführen der Methoden-->
<%= killdoublesandcross %>
<%= triangle %>

<table class="table table-hover table-condensed">
  <tr>
    <th>Value Euro</th>
    <th>Value US-Dollar</th>
    <th>Description</th>
    <th>Debitor</th>
    <th>Creditor</th>
    <!--<th>Cleared</th>-->
    <th>Confirmed</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
	
	<% Debt.where('creditor_id = ? or debitor_id =?',current_user.id,current_user.id).each do |debt| %>

  <tr>
    <td><%= debt.value %></td>

    <td><%= Exchange.find(1).value * debt.value %></td>
    <td><%= debt.description %></td>
    <td><%= User.find(debt.debitor_id).nickname %></td>
    <td><%= User.find(debt.creditor_id).nickname %></td>
    <!--<td><%= debt.cleared %></td>-->
    <td>		
	<% if debt.confirmed %>
    		<%= check_box_tag 'confirmed', true %>
		<!--<%= check_box_tag 'confirmed', false %>-->
	<%end%>
    </td>
    <!--<td><%= debt.confirmed %></td>-->
    <td><%= link_to 'Show', debt %></td>
    <td><%= link_to 'Edit', edit_debt_path(debt) %></td>	
    <td><% if can?(:destroy, Debt) %>
	<%= link_to 'Destroy', debt, method: :delete, data: { confirm: 'Are you sure?' } %><%end%>
    </td>
  <%end%>
  </tr>
</table>

<!-- Tabelle nach Auflösung der direkten Gleichheiten und Kreuzungen !!!!!!-->

<h3>Zusammengefasst heißt das:</h3>
<table class="table table-hover table-condensed">
  <tr>
    <th>Value</th>
    <th>Debitor</th>
    <th>Creditor</th>
  </tr>
	
	<% Debtniceview.where('creditor_id = ? or debitor_id =?',current_user.id,current_user.id).each do |debtniceview| %>

  <tr>
    <td><%= debtniceview.value %></td>
    <td><%= User.find(debtniceview.debitor_id).nickname %></td>
    <td><%= User.find(debtniceview.creditor_id).nickname %></td>
  <%end%>
  </tr>
</table>

<!-- In Worten: !!!!!!-->
<h3>Das heißt in Worten:</h3>
<% Debtniceview.where('creditor_id = ? or debitor_id =?',current_user.id,current_user.id).each do |debtniceview| %>

<%= User.find(debtniceview.debitor_id).nickname %> schuldet <%= User.find(debtniceview.creditor_id).nickname %> noch <%= debtniceview.value %> €.</br> 
<%end%>

<!-- In Worten nach Auflösung der Dreiecksbeziehungen: !!!!!!-->
<h3>Nach Auflösung der Dreiecke heißt das:</h3>
<% Debtcycle.where('creditor_id = ? or debitor_id =?',current_user.id,current_user.id).each do |debtcycle| %>

<%= User.find(debtcycle.debitor_id).nickname %> schuldet <%= User.find(debtcycle.creditor_id).nickname %> noch <%= debtcycle.value %> €.</br> 
<%end%>



<%end%>
<br />

